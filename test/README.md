# Ollama API ν…μ¤νΈ

μ΄ λ””λ ‰ν† λ¦¬λ” Ollama LLM APIλ¥Ό ν…μ¤νΈν•κΈ° μ„ν• μ¤ν¬λ¦½νΈλ“¤μ„ ν¬ν•¨ν•©λ‹λ‹¤.

## μ‚¬μ „ μ¤€λΉ„

### 1. Ollama μ„¤μΉ λ° μ‹¤ν–‰

```bash
# Ollama μ„¤μΉ (μ΄λ―Έ μ„¤μΉλμ–΄ μλ‹¤λ©΄ μƒλµ)
brew install ollama

# Ollama μ„λ²„ μ‹¤ν–‰
ollama serve

# μƒ ν„°λ―Έλ„μ—μ„ λ¨λΈ λ‹¤μ΄λ΅λ“
ollama pull llama3.2:3b
```

### 2. Python μμ΅΄μ„± μ„¤μΉ (Python ν…μ¤νΈμ©)

```bash
pip3 install requests
```

## ν…μ¤νΈ μ¤ν¬λ¦½νΈ

### 1. `test_ollama.py` - μΆ…ν•© ν…μ¤νΈ

6κ°€μ§€ μ‹λ‚λ¦¬μ¤λ¥Ό μλ™μΌλ΅ ν…μ¤νΈν•©λ‹λ‹¤:

```bash
# κΈ°λ³Έ λ¨λΈ (llama3.2:3b) μ‚¬μ©
python3 test_ollama.py

# λ‹¤λ¥Έ λ¨λΈ μ§€μ •
python3 test_ollama.py exaone3.5:latest
python3 test_ollama.py llama3.2:3b
```

**ν…μ¤νΈ ν•­λ©:**
- β… λ‹¨μΌ λ©”μ‹μ§€ ν…μ¤νΈ
- β μ»¨ν…μ¤νΈ μ—†λ” λ€ν™” (μ‹¤ν¨ μμƒ)
- β… νμ¤ν† λ¦¬ ν¬ν•¨ λ€ν™” (μ„±κ³µ μμƒ)
- β… μ‹μ¤ν… ν”„λ΅¬ν”„νΈ μ μ©
- β… μ¤νΈλ¦¬λ° μ‘λ‹µ
- β… λ©€ν‹°ν„΄ λ€ν™” (3ν„΄)

### 2. `test_ollama_curl.sh` - Curl ν…μ¤νΈ

curl λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν• κ°„λ‹¨ν• API ν…μ¤νΈ:

```bash
./test_ollama_curl.sh
```

**μ”κµ¬μ‚¬ν•­:**
- `jq` μ„¤μΉ ν•„μ”: `brew install jq`

### 3. `test_ollama_interactive.py` - λ€ν™”ν• ν…μ¤νΈ

μ‹¤μ  μ±„ν…μ²λΌ λ€ν™”λ¥Ό μ£Όκ³ λ°›μ„ μ μλ” μΈν„°λ™ν‹°λΈ μΈν„°νμ΄μ¤:

```bash
# κΈ°λ³Έ λ¨λΈ μ‚¬μ©
python3 test_ollama_interactive.py

# λ‹¤λ¥Έ λ¨λΈ μ§€μ •
python3 test_ollama_interactive.py exaone3.5:latest
```

**μ‚¬μ© κ°€λ¥ν• λ…λ Ήμ–΄:**
- `/exit` λλ” `/quit` - μΆ…λ£
- `/clear` - λ€ν™” νμ¤ν† λ¦¬ μ΄κΈ°ν™”
- `/history` - ν„μ¬ λ€ν™” νμ¤ν† λ¦¬ λ³΄κΈ°
- `/system [λ©”μ‹μ§€]` - μ‹μ¤ν… ν”„λ΅¬ν”„νΈ λ³€κ²½

**μμ‹:**
```
λ‹Ήμ‹ : μ•λ…•? λ‚΄ μ΄λ¦„μ€ μ² μμ•Ό.
AI: μ•λ…•ν•μ„Έμ” μ² μλ‹! λ°κ°‘μµλ‹λ‹¤.

λ‹Ήμ‹ : λ‚΄ μ΄λ¦„μ΄ λ­μ•Ό?
AI: μ² μλ‹μ΄μ‹μ£ !

λ‹Ήμ‹ : /clear
π§Ή λ€ν™” νμ¤ν† λ¦¬κ°€ μ΄κΈ°ν™”λμ—μµλ‹λ‹¤.

λ‹Ήμ‹ : /system λ‹Ήμ‹ μ€ κ·€μ—¬μ΄ κ³ μ–‘μ΄ μΊλ¦­ν„°μ…λ‹λ‹¤. λƒμΉ~ν•κ³  λ§ν•μ„Έμ”.
β… μ‹μ¤ν… ν”„λ΅¬ν”„νΈ λ³€κ²½λ¨

λ‹Ήμ‹ : μ•λ…•?
AI: λƒμΉ~ μ•λ…•ν•μ„Έμ”! π±
```

## μ£Όμ” ν•™μµ ν¬μΈνΈ

### 1. μ»¨ν…μ¤νΈ μ μ§€ λ°©λ²•

Ollama APIλ” statelessμ΄λ―€λ΅, μ΄μ „ λ€ν™”λ¥Ό κΈ°μ–µν•λ ¤λ©΄ **μ „μ²΄ νμ¤ν† λ¦¬λ¥Ό λ§¤λ² μ „μ†΅**ν•΄μ•Ό ν•©λ‹λ‹¤:

```python
messages = [
    {"role": "system", "content": "μ‹μ¤ν… ν”„λ΅¬ν”„νΈ"},
    {"role": "user", "content": "μ²« λ²μ§Έ μ§λ¬Έ"},
    {"role": "assistant", "content": "μ²« λ²μ§Έ λ‹µλ³€"},
    {"role": "user", "content": "λ‘ λ²μ§Έ μ§λ¬Έ"},  # β† μƒλ΅μ΄ μ§λ¬Έ
]
```

### 2. μ‹μ¤ν… ν”„λ΅¬ν”„νΈ ν™μ©

`system` roleμ„ μ‚¬μ©ν•μ—¬ AIμ μ„±κ²©/μ—­ν• μ„ μ„¤μ •ν•  μ μμµλ‹λ‹¤:

```python
{
    "role": "system",
    "content": "λ‹Ήμ‹ μ€ μΉκ·Όν• λ°μ΄ν… μ•± AI μ–΄μ‹μ¤ν„΄νΈμ…λ‹λ‹¤."
}
```

### 3. μ¤νΈλ¦¬λ° vs μΌλ° μ‘λ‹µ

- **μ¤νΈλ¦¬λ°** (`stream: true`): μ‹¤μ‹κ°„μΌλ΅ μ‘λ‹µμ„ λ°›μ•„ ν‘μ‹ (μ±—λ΄‡ λλ‚)
- **μΌλ°** (`stream: false`): μ „μ²΄ μ‘λ‹µμ„ ν• λ²μ— λ°›μ (κ°„λ‹¨ν• μ²λ¦¬)

## λ‹¤μ λ‹¨κ³„

μ΄ ν…μ¤νΈλ¥Ό ν†µν•΄ ν™•μΈν• μ‚¬ν•­μ„ λ°”νƒ•μΌλ΅:

1. **Supabase Edge Function** μ‘μ„±
2. **μ„Έμ… κ΄€λ¦¬ μ„λ²„** κµ¬μ¶• (Python/Node.js)
3. **Flutter μ•±**κ³Ό ν†µν•©

μμ„Έν• μ•„ν‚¤ν…μ²λ” μƒμ„ λ””λ ‰ν† λ¦¬μ λ¬Έμ„λ¥Ό μ°Έκ³ ν•μ„Έμ”.
